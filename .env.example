# ===================================================
# VAULTWARDEN CONFIGURATION - DOKPLOY + CLOUDFLARE ZERO TRUST
# ===================================================

# Configuración de Vaultwarden
# El dominio debe coincidir con tu aplicación en Cloudflare Zero Trust
DOMAIN=https://vault.internal.example.com

# Registro y Invitaciones
# IMPORTANTE: Mantener SIGNUPS_ALLOWED=false para seguridad
SIGNUPS_ALLOWED=false
INVITATIONS_ALLOWED=true
SENDS_ALLOWED=true
WEB_VAULT_ENABLED=true
SHOW_PASSWORD_HINT=false

# Logging
LOG_LEVEL=info
EXTENDED_LOGGING=true

# Admin Panel - IMPORTANTE: Genera un token seguro
# Puedes generarlo con: openssl rand -base64 48
ADMIN_TOKEN=

# ===================================================
# CLOUDFLARE TUNNEL CONFIGURATION
# ===================================================

# Token del Cloudflare Tunnel
# Obtén este token en: https://one.dash.cloudflare.com/
# Networks -> Tunnels -> Selecciona tu tunnel -> Copy Install Command
# El token estará en el comando: --token eyJhIjoiXXXXXXXX...
CLOUDFLARE_TUNNEL_TOKEN=

# Configuración de la Access Application en Cloudflare
# Se utiliza en el dashboard de Zero Trust para configurar quién puede acceder
# CLOUDFLARE_DOMAIN=vault.tudominio.com
# CLOUDFLARE_POLICY=usuarios@tuempresa.com

# Programación de backups (formato cron)
# Default: 2 AM todos los días
BACKUP_SCHEDULE=0 2 * * *

# Días que se conservan los backups (en R2 y local)
BACKUP_KEEP_DAYS=14

# Contraseña para encriptar backups (MUY RECOMENDADO)
# Genera una con: openssl rand -base64 32
BACKUP_ZIP_PASSWORD=

# ===================================================
# CLOUDFLARE R2 CONFIGURATION
# ===================================================

# Nombre del remote en rclone (default: r2)
RCLONE_REMOTE_NAME=r2

# Directorio en el bucket de R2
RCLONE_REMOTE_DIR=/vaultwarden-backups

# Credenciales de Cloudflare R2
# Obtén estas en: Cloudflare Dashboard -> R2 -> Manage R2 API Tokens
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_NAME=vaultwarden-backups
# Cloudflare tunnel
CLOUDFLARE_TUNNEL_TOKEN=

# URL de ping para monitoreo (opcional - ej: healthchecks.io, uptime-kuma)
# BACKUP_PING_URL=https://hc-ping.com/your-uuid

# ===================================================
# SMTP CONFIGURATION (Opcional)
# ===================================================

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURITY=starttls
# SMTP_FROM=noreply@example.com
# SMTP_FROM_NAME=Vaultwarden
# SMTP_USERNAME=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_TIMEOUT=15
